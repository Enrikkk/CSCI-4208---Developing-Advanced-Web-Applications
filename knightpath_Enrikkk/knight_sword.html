<html>
    <!-- This page is very important in the stoy line.
         It will represent the most visited place inside the castle. -->
    
    <head>
        <title> Triple Adventure </title>
        <link rel="icon" href="knight_assets/weapons/cimitar.png" />
        <link rel="stylesheet" href="knight_styles/styles.css" >
    </head>

    <body>
        <div id="beforeLift"
             style="background-image: url('knight_assets/stuckSword.png');
                    background-repeat: no-repeat;
                    background-position: center;
                    background-size: cover;
                    width: 100%;
                    height: 100%;
                    opacity: 1;
                    transition: opacity 3s ease-in-out" >
            
            <!-- We will use this div container to make the animation for lifting the sword. -->
            <div    id = "lift"
                    style="background-image: url('knight_assets/liftSword.jpg');
                    background-repeat: no-repeat;
                    background-position: center;
                    background-size: cover;
                    width: 100%;
                    height: 100%;
                    z-index: 10000000000;
                    opacity: 0;
                    transition: opacity 3s ease-in-out" >
            </div>

            <a> <button id="bt1"
                        onclick="liftSword();"
                        class="smallButton"
                        style="position: absolute;
                               left:23%;
                               top: 70%;
                               opacity: 1;
                               transition: opacity 1.5s ease-in-out;" > Lift Sword </button> </a> </p>

            <p> <a id = "exit" href = "knight_garden.html"> 
                <button id = "bt2"
                        class="exitButton"
                        style="position: absolute;
                               left: 58%;
                               bottom: 7%;
                               opacity: 1;
                               transition: opacity 1.5s ease-in-out;" > Exit </button> </a> </p>
            
            <p class="inventory-title"> Inventory </p>
            <div id="inventory" class="inventory"></div>
            <script src="inventory.js"> </script>
            <div id="flags" class="flagBox">
                <script src="inventory.js" defer></script>
            </div>
        </div>

        <script src="inventory.js" defer> </script>
        <script>
            exit.href += location.search;

            async function liftSword() {
                if(amountItem("strength") > 0) {
                    let transition = document.getElementById("lift");
                    await sleep(500);
                    transition.style.opacity="1";
                    await sleep(2500);
                    if(confirm("With the strength gained at the royal barracks, you were able to lift the mighty sword from the rock!")) {
                        addItem("greatSword", 5);
                        deleteItem("firstSword");
                        window.location.href = "knight_liftedSword.html" + location.search;
                    } else {
                        let transition = document.getElementById("lift");
                        await sleep(500);
                        transition.style.opacity="1";
                        await sleep(2000);
                        confirm("You were not able to lift the sword from the rock, you are not strong enough\nMaybe you need some training...");
                    }
                } else {
                    let b1 = document.getElementById("bt1");
                    let b2 = document.getElementById("bt2");
                    let transition = document.getElementById("lift");
                    b1.style.opacity = 0;
                    b2.style.opacity = 0;
                    await sleep(500);
                    transition.style.opacity="1";
                    await sleep(4000);
                    if(confirm("You tried lifting the sword, but it didn't move\nMaybe you need some training...")) {
                        transition.style.opacity="0";
                        b1.style.opacity = 1;
                        b2.style.opacity = 1;
                    }
                }
            }
        </script>

    </body>

</html>